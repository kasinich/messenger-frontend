{"ast":null,"code":"import { openNotification } from \"utils/helpers\";\nimport { userApi } from \"utils/api\";\nconst actions = {\n  setUserData: data => ({\n    type: \"USER:SET_DATA\",\n    payload: data\n  }),\n  setIsAuth: bool => ({\n    type: \"USER:SET_IS_AUTH\",\n    payload: bool\n  }),\n  fetchUserData: () => dispatch => {\n    userApi.getMe().then(({\n      data\n    }) => {\n      dispatch(actions.setUserData(data));\n    }).catch(err => {\n      if (err.response.status === 403) {\n        dispatch(actions.setIsAuth(false));\n        delete window.localStorage.token;\n      }\n    });\n  },\n  fetchUserLogin: postData => dispatch => {\n    return userApi.signIn(postData).then(({\n      data\n    }) => {\n      const {\n        status,\n        token\n      } = data;\n      if (status === \"success\") {\n        openNotification({\n          title: \"Отлично!\",\n          text: \"Авторизация успешна.\",\n          type: \"success\"\n        });\n        window.axios.defaults.headers.common[\"token\"] = token;\n        window.localStorage[\"token\"] = token;\n        dispatch(actions.fetchUserData());\n        dispatch(actions.setIsAuth(true));\n      } else {\n        openNotification({\n          title: \"Ошибка при авторизации\",\n          text: \"Неверный логин или пароль\",\n          type: \"error\"\n        });\n      }\n      return data;\n    });\n  },\n  fetchUserRegister: postData => dispatch => {\n    return userApi.signUp(postData).then(({\n      data\n    }) => {\n      return data;\n    });\n  }\n};\nexport default actions;","map":{"version":3,"names":["openNotification","userApi","actions","setUserData","data","type","payload","setIsAuth","bool","fetchUserData","dispatch","getMe","then","catch","err","response","status","window","localStorage","token","fetchUserLogin","postData","signIn","title","text","axios","defaults","headers","common","fetchUserRegister","signUp"],"sources":["D:/React/projects/02-second-project/messanger-frontend/src/redux/actions/user.js"],"sourcesContent":["import { openNotification } from \"utils/helpers\";\r\nimport { userApi } from \"utils/api\";\r\n\r\nconst actions = {\r\n    setUserData: data => ({\r\n        type: \"USER:SET_DATA\",\r\n        payload: data\r\n    }),\r\n    setIsAuth: bool => ({\r\n        type: \"USER:SET_IS_AUTH\",\r\n        payload: bool\r\n    }),\r\n    fetchUserData: () => dispatch => {\r\n        userApi.getMe()\r\n        .then(({ data }) => {\r\n            dispatch(actions.setUserData(data));\r\n        })\r\n        .catch((err)=>{\r\n            if (err.response.status === 403) {\r\n                dispatch(actions.setIsAuth(false));\r\n                delete window.localStorage.token\r\n            }\r\n        })\r\n    },\r\n    fetchUserLogin: postData => dispatch => {\r\n        return userApi.signIn(postData)\r\n            .then(({ data }) => {\r\n                const { status, token } = data;\r\n                if (status === \"success\") {\r\n                    openNotification({\r\n                        title: \"Отлично!\",\r\n                        text: \"Авторизация успешна.\",\r\n                        type: \"success\"\r\n                    })\r\n                    window.axios.defaults.headers.common[\"token\"] = token;\r\n                    window.localStorage[\"token\"] = token;\r\n                    dispatch(actions.fetchUserData());\r\n                    dispatch(actions.setIsAuth(true));\r\n                }\r\n                else {\r\n                    openNotification({\r\n                        title: \"Ошибка при авторизации\",\r\n                        text: \"Неверный логин или пароль\",\r\n                        type: \"error\"\r\n                    })\r\n                }\r\n                return data;\r\n            })\r\n    },\r\n    fetchUserRegister: postData => dispatch => {\r\n        return userApi.signUp(postData).then(({ data }) => {\r\n            return data;\r\n        });\r\n    }\r\n};\r\n\r\n\r\nexport default actions"],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,eAAe;AAChD,SAASC,OAAO,QAAQ,WAAW;AAEnC,MAAMC,OAAO,GAAG;EACZC,WAAW,EAAEC,IAAI,KAAK;IAClBC,IAAI,EAAE,eAAe;IACrBC,OAAO,EAAEF;EACb,CAAC,CAAC;EACFG,SAAS,EAAEC,IAAI,KAAK;IAChBH,IAAI,EAAE,kBAAkB;IACxBC,OAAO,EAAEE;EACb,CAAC,CAAC;EACFC,aAAa,EAAEA,CAAA,KAAMC,QAAQ,IAAI;IAC7BT,OAAO,CAACU,KAAK,CAAC,CAAC,CACdC,IAAI,CAAC,CAAC;MAAER;IAAK,CAAC,KAAK;MAChBM,QAAQ,CAACR,OAAO,CAACC,WAAW,CAACC,IAAI,CAAC,CAAC;IACvC,CAAC,CAAC,CACDS,KAAK,CAAEC,GAAG,IAAG;MACV,IAAIA,GAAG,CAACC,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;QAC7BN,QAAQ,CAACR,OAAO,CAACK,SAAS,CAAC,KAAK,CAAC,CAAC;QAClC,OAAOU,MAAM,CAACC,YAAY,CAACC,KAAK;MACpC;IACJ,CAAC,CAAC;EACN,CAAC;EACDC,cAAc,EAAEC,QAAQ,IAAIX,QAAQ,IAAI;IACpC,OAAOT,OAAO,CAACqB,MAAM,CAACD,QAAQ,CAAC,CAC1BT,IAAI,CAAC,CAAC;MAAER;IAAK,CAAC,KAAK;MAChB,MAAM;QAAEY,MAAM;QAAEG;MAAM,CAAC,GAAGf,IAAI;MAC9B,IAAIY,MAAM,KAAK,SAAS,EAAE;QACtBhB,gBAAgB,CAAC;UACbuB,KAAK,EAAE,UAAU;UACjBC,IAAI,EAAE,sBAAsB;UAC5BnB,IAAI,EAAE;QACV,CAAC,CAAC;QACFY,MAAM,CAACQ,KAAK,CAACC,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,OAAO,CAAC,GAAGT,KAAK;QACrDF,MAAM,CAACC,YAAY,CAAC,OAAO,CAAC,GAAGC,KAAK;QACpCT,QAAQ,CAACR,OAAO,CAACO,aAAa,CAAC,CAAC,CAAC;QACjCC,QAAQ,CAACR,OAAO,CAACK,SAAS,CAAC,IAAI,CAAC,CAAC;MACrC,CAAC,MACI;QACDP,gBAAgB,CAAC;UACbuB,KAAK,EAAE,wBAAwB;UAC/BC,IAAI,EAAE,2BAA2B;UACjCnB,IAAI,EAAE;QACV,CAAC,CAAC;MACN;MACA,OAAOD,IAAI;IACf,CAAC,CAAC;EACV,CAAC;EACDyB,iBAAiB,EAAER,QAAQ,IAAIX,QAAQ,IAAI;IACvC,OAAOT,OAAO,CAAC6B,MAAM,CAACT,QAAQ,CAAC,CAACT,IAAI,CAAC,CAAC;MAAER;IAAK,CAAC,KAAK;MAC/C,OAAOA,IAAI;IACf,CAAC,CAAC;EACN;AACJ,CAAC;AAGD,eAAeF,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}