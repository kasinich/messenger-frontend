{"ast":null,"code":"import _asyncToGenerator from \"D:/React/projects/02-second-project/messanger-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _jsxFileName = \"D:\\\\React\\\\projects\\\\02-second-project\\\\messanger-frontend\\\\src\\\\components\\\\UploadFiles\\\\index.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Upload, Modal } from \"antd\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction getBase64(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = error => reject(error);\n  });\n}\nconst UploadFiles = ({\n  attachments,\n  removeAttachment\n}) => {\n  _s();\n  const [state, setState] = useState({\n    previewVisible: false,\n    previewImage: \"\",\n    fileList: attachments\n  });\n  useEffect(() => {\n    setState({\n      ...state,\n      fileList: attachments\n    });\n  }, [attachments]);\n  const handleCancel = () => setState({\n    ...state,\n    previewVisible: false\n  });\n  const handlePreview = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (file) {\n      if (!file.url && !file.preview) {\n        file.preview = yield getBase64(file.originFileObj);\n      }\n      setState({\n        ...state,\n        previewImage: file.url || file.preview,\n        previewVisible: true\n      });\n    });\n    return function handlePreview(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  const handleChange = ({\n    fileList\n  }) => {\n    setState({\n      ...state,\n      fileList\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"clearfix\",\n    children: [/*#__PURE__*/_jsxDEV(Upload, {\n      action: \"https://www.mocky.io/v2/5cc8019d300000980a055e76\",\n      listType: \"picture-card\",\n      fileList: state.fileList,\n      onPreview: handlePreview,\n      onChange: handleChange,\n      onRemove: file => removeAttachment(file)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: state.previewVisible,\n      footer: null,\n      onCancel: handleCancel,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"example\",\n        style: {\n          width: \"100%\"\n        },\n        src: state.previewImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n};\n_s(UploadFiles, \"w627GRzfxKJBQNCHok3LqTM7uUw=\");\n_c = UploadFiles;\nUploadFiles.defaultProps = {\n  attachments: []\n};\nexport default UploadFiles;\nvar _c;\n$RefreshReg$(_c, \"UploadFiles\");","map":{"version":3,"names":["React","useState","useEffect","Upload","Modal","jsxDEV","_jsxDEV","getBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","UploadFiles","attachments","removeAttachment","_s","state","setState","previewVisible","previewImage","fileList","handleCancel","handlePreview","_ref","_asyncToGenerator","url","preview","originFileObj","_x","apply","arguments","handleChange","className","children","action","listType","onPreview","onChange","onRemove","fileName","_jsxFileName","lineNumber","columnNumber","open","footer","onCancel","alt","style","width","src","_c","defaultProps","$RefreshReg$"],"sources":["D:/React/projects/02-second-project/messanger-frontend/src/components/UploadFiles/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Upload, Modal } from \"antd\";\r\n\r\nfunction getBase64(file) {\r\n    return new Promise((resolve, reject) => {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = () => resolve(reader.result);\r\n        reader.onerror = error => reject(error);\r\n    });\r\n}\r\n\r\nconst UploadFiles = ({ attachments, removeAttachment }) => {\r\n    const [state, setState] = useState({\r\n        previewVisible: false,\r\n        previewImage: \"\",\r\n        fileList: attachments\r\n    });\r\n\r\n    useEffect(() => {\r\n        setState({\r\n            ...state,\r\n            fileList: attachments\r\n        });\r\n    }, [attachments]);\r\n\r\n    const handleCancel = () => setState({ ...state, previewVisible: false });\r\n\r\n    const handlePreview = async file => {\r\n        if (!file.url && !file.preview) {\r\n            file.preview = await getBase64(file.originFileObj);\r\n        }\r\n\r\n        setState({\r\n            ...state,\r\n            previewImage: file.url || file.preview,\r\n            previewVisible: true\r\n        });\r\n    };\r\n\r\n    const handleChange = ({ fileList }) => {\r\n        setState({\r\n            ...state,\r\n            fileList\r\n        });\r\n    }\r\n    return (\r\n        <div className=\"clearfix\">\r\n            <Upload\r\n                action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\r\n                listType=\"picture-card\"\r\n                fileList={state.fileList}\r\n                onPreview={handlePreview}\r\n                onChange={handleChange}\r\n                onRemove={file => removeAttachment(file)}\r\n            />\r\n            <Modal\r\n                open={state.previewVisible}\r\n                footer={null}\r\n                onCancel={handleCancel}\r\n            >\r\n                <img alt=\"example\" style={{ width: \"100%\" }} src={state.previewImage} />\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nUploadFiles.defaultProps = {\r\n    attachments: []\r\n};\r\n\r\nexport default UploadFiles;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}